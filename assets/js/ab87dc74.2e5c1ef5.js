"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[54051],{33526:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var r=n(74848),i=n(28453),s=n(94331);const o={title:"nco",description:"Supplement to the nested cluster optimization (NCO) portfolio building tool documentation. Offers comprehensive information on usage, parameters, and examples of how to use the nco tool to optimize your investment portfolio. The topics covered include codependence, covariance, risk measures, and cluster settings.",keywords:["nested clustered optimization","nco","portfolio building","portfolio optimization","codependence","covariance","risk measure","correlation matrix","portfolio parameters","cluster","asset allocation","investment strategy"]},d=void 0,a={id:"terminal/reference/portfolio/po/nco",title:"nco",description:"Supplement to the nested cluster optimization (NCO) portfolio building tool documentation. Offers comprehensive information on usage, parameters, and examples of how to use the nco tool to optimize your investment portfolio. The topics covered include codependence, covariance, risk measures, and cluster settings.",source:"@site/content/terminal/reference/portfolio/po/nco.md",sourceDirName:"terminal/reference/portfolio/po",slug:"/terminal/reference/portfolio/po/nco",permalink:"/terminal/reference/portfolio/po/nco",draft:!1,unlisted:!1,editUrl:"https://github.com/OpenBB-finance/OpenBBTerminal/edit/main/website/content/terminal/reference/portfolio/po/nco.md",tags:[],version:"current",lastUpdatedBy:"Henrique Joaquim",lastUpdatedAt:1716390788e3,frontMatter:{title:"nco",description:"Supplement to the nested cluster optimization (NCO) portfolio building tool documentation. Offers comprehensive information on usage, parameters, and examples of how to use the nco tool to optimize your investment portfolio. The topics covered include codependence, covariance, risk measures, and cluster settings.",keywords:["nested clustered optimization","nco","portfolio building","portfolio optimization","codependence","covariance","risk measure","correlation matrix","portfolio parameters","cluster","asset allocation","investment strategy"]},sidebar:"tutorialSidebar",previous:{title:"mktcap",permalink:"/terminal/reference/portfolio/po/mktcap"},next:{title:"arg",permalink:"/terminal/reference/portfolio/po/parameters/arg"}},l={},c=[{value:"Usage",id:"usage",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Examples",id:"examples",level:2}];function h(e){const t={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{title:"portfolio/po/nco - Reference | OpenBB Terminal Docs"}),"\n",(0,r.jsx)(t.p,{children:"Builds a nested clustered optimization portfolio"}),"\n",(0,r.jsx)(t.h3,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"nco [-cd {pearson,spearman,abs_pearson,abs_spearman,distance,mutual_info,tail}] [-cv {hist,ewma1,ewma2,ledoit,oas,shrunk,gl,jlogo,fixed,spectral,shrink}] [-o {MinRisk,Utility,Sharpe,ERC}] [-ra RISK_AVERSION] [-lk LINKAGE] [-k AMOUNT_CLUSTERS] [-mk MAX_CLUSTERS] [-bi {KN,FD,SC,HGR}] [-at ALPHA_TAIL] [-lo] [-de SMOOTHING_FACTOR_EWMA] [-rm {MV,MAD,MSV,FLPM,SLPM,CVaR,EVaR,WR,ADD,UCI,CDaR,EDaR,MDD}] [-mt METHOD] [-ct CATEGORIES] [-p PERIOD] [-s START_PERIOD] [-e END_PERIOD] [-lr] [--freq {d,w,m}] [-mn MAX_NAN] [-th THRESHOLD_VALUE] [-r RISK_FREE] [-a SIGNIFICANCE_LEVEL] [-v LONG_ALLOCATION] [--name NAME]\n"})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Default"}),(0,r.jsx)(t.th,{children:"Optional"}),(0,r.jsx)(t.th,{children:"Choices"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"co_dependence"}),(0,r.jsx)(t.td,{children:"The codependence or similarity matrix used to build the distance metric and clusters. Possible values are: 'pearson': pearson correlation matrix 'spearman': spearman correlation matrix 'abs_pearson': absolute value of pearson correlation matrix 'abs_spearman': absolute value of spearman correlation matrix 'distance': distance correlation matrix 'mutual_info': mutual information codependence matrix 'tail': tail index codependence matrix"}),(0,r.jsx)(t.td,{children:"pearson"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"pearson, spearman, abs_pearson, abs_spearman, distance, mutual_info, tail"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"covariance"}),(0,r.jsx)(t.td,{children:"Method used to estimate covariance matrix. Possible values are 'hist': historical method 'ewma1': exponential weighted moving average with adjust=True 'ewma2': exponential weighted moving average with adjust=False 'ledoit': Ledoit and Wolf shrinkage method 'oas': oracle shrinkage method 'shrunk': scikit-learn shrunk method 'gl': graphical lasso method 'jlogo': j-logo covariance 'fixed': takes average of eigenvalues above max Marchenko Pastour limit 'spectral': makes zero eigenvalues above max Marchenko Pastour limit 'shrink': Lopez de Prado's book shrinkage method"}),(0,r.jsx)(t.td,{children:"hist"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"hist, ewma1, ewma2, ledoit, oas, shrunk, gl, jlogo, fixed, spectral, shrink"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"objective"}),(0,r.jsx)(t.td,{children:"Objective function used to optimize the portfolio"}),(0,r.jsx)(t.td,{children:"MinRisk"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"MinRisk, Utility, Sharpe, ERC"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"risk_aversion"}),(0,r.jsx)(t.td,{children:"Risk aversion parameter"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"linkage"}),(0,r.jsx)(t.td,{children:"Linkage method of hierarchical clustering"}),(0,r.jsx)(t.td,{children:"single"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"single, complete, average, weighted, centroid, median, ward, dbht"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"amount_clusters"}),(0,r.jsx)(t.td,{children:"Number of clusters specified in advance"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"max_clusters"}),(0,r.jsx)(t.td,{children:"Max number of clusters used by the two difference gap statistic to find the optimal number of clusters. If k is empty this value is used"}),(0,r.jsx)(t.td,{children:"10"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"amount_bins"}),(0,r.jsx)(t.td,{children:"Number of bins used to calculate the variation of information"}),(0,r.jsx)(t.td,{children:"KN"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"KN, FD, SC, HGR"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"alpha_tail"}),(0,r.jsx)(t.td,{children:"Significance level for lower tail dependence index, only used when when codependence value is 'tail'"}),(0,r.jsx)(t.td,{children:"0.05"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"leaf_order"}),(0,r.jsx)(t.td,{children:"indicates if the cluster are ordered so that the distance between successive leaves is minimal"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"smoothing_factor_ewma"}),(0,r.jsx)(t.td,{children:"Smoothing factor for ewma estimators"}),(0,r.jsx)(t.td,{children:"0.94"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"risk_measure"}),(0,r.jsx)(t.td,{children:"Risk measure used to optimize the portfolio. Possible values are: 'MV' : Variance 'MAD' : Mean Absolute Deviation 'MSV' : Semi Variance (Variance of negative returns) 'FLPM' : First Lower Partial Moment 'SLPM' : Second Lower Partial Moment 'CVaR' : Conditional Value at Risk 'EVaR' : Entropic Value at Risk 'WR' : Worst Realization 'ADD' : Average Drawdown of uncompounded returns 'UCI' : Ulcer Index of uncompounded returns 'CDaR' : Conditional Drawdown at Risk of uncompounded returns 'EDaR' : Entropic Drawdown at Risk of uncompounded returns 'MDD' : Maximum Drawdown of uncompounded returns"}),(0,r.jsx)(t.td,{children:"MV"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"MV, MAD, MSV, FLPM, SLPM, CVaR, EVaR, WR, ADD, UCI, CDaR, EDaR, MDD"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"nan_fill_method"}),(0,r.jsx)(t.td,{children:"Method used to fill nan values in time series, by default time. Possible values are: 'linear': linear interpolation 'time': linear interpolation based on time index 'nearest': use nearest value to replace nan values 'zero': spline of zeroth order 'slinear': spline of first order 'quadratic': spline of second order 'cubic': spline of third order 'barycentric': builds a polynomial that pass for all points"}),(0,r.jsx)(t.td,{children:"time"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"linear, time, nearest, zero, slinear, quadratic, cubic, barycentric"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"categories"}),(0,r.jsx)(t.td,{children:"Show selected categories"}),(0,r.jsx)(t.td,{children:"ASSET_CLASS, COUNTRY, SECTOR, INDUSTRY"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"historic_period"}),(0,r.jsx)(t.td,{children:"Period to get yfinance data from. Possible frequency strings are: 'd': means days, for example '252d' means 252 days 'w': means weeks, for example '52w' means 52 weeks 'mo': means months, for example '12mo' means 12 months 'y': means years, for example '1y' means 1 year 'ytd': downloads data from beginning of year to today 'max': downloads all data available for each asset"}),(0,r.jsx)(t.td,{children:"3y"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"1d, 5d, 1mo, 3mo, 6mo, 1y, 2y, 5y, 10y, ytd, max"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"start_period"}),(0,r.jsx)(t.td,{children:"Start date to get yfinance data from. Must be in 'YYYY-MM-DD' format"}),(0,r.jsx)(t.td,{}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"end_period"}),(0,r.jsx)(t.td,{children:"End date to get yfinance data from. Must be in 'YYYY-MM-DD' format"}),(0,r.jsx)(t.td,{}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"log_returns"}),(0,r.jsx)(t.td,{children:"If use logarithmic or arithmetic returns to calculate returns"}),(0,r.jsx)(t.td,{children:"False"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"return_frequency"}),(0,r.jsx)(t.td,{children:"Frequency used to calculate returns. Possible values are: 'd': for daily returns 'w': for weekly returns 'm': for monthly returns"}),(0,r.jsx)(t.td,{children:"d"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"d, w, m"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"max_nan"}),(0,r.jsx)(t.td,{children:"Max percentage of nan values accepted per asset to be considered in the optimization process"}),(0,r.jsx)(t.td,{children:"0.05"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"threshold_value"}),(0,r.jsx)(t.td,{children:"Value used to replace outliers that are higher to threshold in absolute value"}),(0,r.jsx)(t.td,{children:"0.3"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"risk_free"}),(0,r.jsx)(t.td,{children:"Risk-free rate of borrowing/lending. The period of the risk-free rate must be annual"}),(0,r.jsx)(t.td,{children:"0.02924"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"significance_level"}),(0,r.jsx)(t.td,{children:"Significance level of CVaR, EVaR, CDaR and EDaR"}),(0,r.jsx)(t.td,{children:"0.05"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"long_allocation"}),(0,r.jsx)(t.td,{children:"Amount to allocate to portfolio"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{children:"Save portfolio with personalized or default name"}),(0,r.jsx)(t.td,{children:"NCO_0"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"None"})]})]})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"2022 Apr 05, 14:34 (\ud83e\udd8b) /portfolio/po/ $ nco\n\n [3 Years] Nested clustered optimization using pearson codependence,\nsingle linkage and volatility as risk measure\n\n     Weights\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503      \u2503 Value   \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 AAPL \u2502  7.17 % \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 AMZN \u2502 19.33 % \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 BA   \u2502  0.0 %  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 FB   \u2502  0.53 % \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 MSFT \u2502 16.81 % \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 T    \u2502 56.14 % \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 TSLA \u2502  0.0 %  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nAnnual (by 252) expected return: 15.58%\nAnnual (by \u221a252) volatility: 22.42%\nSharpe ratio: 0.6868\n"})}),"\n",(0,r.jsx)(t.hr,{})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},94331:(e,t,n)=>{n.d(t,{A:()=>s});n(96540);var r=n(5260),i=n(74848);function s(e){let{title:t}=e;return(0,i.jsx)(r.A,{children:(0,i.jsx)("title",{children:t})})}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var r=n(96540);const i={},s=r.createContext(i);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);